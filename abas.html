<!DOCTYPE html>
<html>
<head>
	<title>Padronização texto de chamados</title>
	<meta charset="utf-8"/>
	<meta name="author" content="Infra"/>
<link rel="stylesheet" href="./abas.css">
<script src="JavaScript" href="./abas.js"></script>

		<!--.topicos {margin-left: 10px;}
        
         Configuração do input 
        
        input, button {
            font-size: 14px;
            border-radius: 5px;
            border: none;
            padding: 3px;
        }-->

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
	
    <script type="text/javascript">
		$(document).ready(function(){
			$("#content div:nth-child(1)").show();
			$(".abas li:first div").addClass("selected");
			$(".aba").click(function(){
				$(".aba").removeClass("selected");
				$(this).addClass("selected");
				var indice = $(this).parent().index();
				indice++;
				$("#content div").hide();
				$("#content div:nth-child("+indice+")").show();
			});

			$(".aba").hover(
				function(){$(this).addClass("ativa")},
				function(){$(this).removeClass("ativa")}
			);
		
		});
	</script>
   
</head>
<body>
	<div class="TabControl">
		<div id="header">
			<ul class="abas">
				<li>
					<div class="aba">
						<span>Performance</span>
					</div>
				</li>
				<li>
					
				</li>
				<!--
					<div class="aba">
						<span>Produto</span>
					</div>


					<div class="aba">
						<span>Serviços/TI</span>
					</div>
				-->
				<li>
					<div class="aba">
						<span>Monitoramento</span>
					</div>
				</li>
				<li>	
					
				</li>
			</ul>
		</div>
		
		<!-- Conteúdo da Aba Performance -->
		
		<div id="content">
			<div class="conteudo"> 
            
				<span class="topicos">Atendimento realizado por: <input type="text" id="txtAtendProd"></input></span>
			
				<p class="titulo">Informações Técnicas Server</p>
            		
				<span class="topicos" >
                    SO: <input type="text" id="txtSO"></input></br>
					Versão SQL:  <input type:"text" id: "txtVSQL"></input></br>
					RAM:  <input type:"text" id: "txtRam"></input></br>
					CPU:   <input type:"text" id: "txtCPU"></input></br>
				</span>
				<p class="titulo">Dados da situação/problema</p>
			
				<span class ="topicos">	
					Rotinas com lentidão:  <input type="text" id="txtRotinasLentidao"></input></br>
					Empresas:  <input type="text" id="txtEmpresas"></input></br>
					Máquinas:  <input type="text" id="txtMaquinas"></input></br>
					Acesso TS:  <input type="text" id="txtAcessoTS"></input></br>
					Qtd pessoas que usam o NG:  <input type="text" id="txtQtdPessoas"></input></br>
					Maior banco da NG:  <input type="text" id="txtMaiorBanco"></input></br>
					Velocidade HD (Benchmark):  <input type="text" id="txtVelocidadeHD"></input></br>
					Início do problema: <input type="text" id="txtInicioProblema"></input></br>
				</span>
				
				<p class="titulo">Análise Técnica</p>
				
				<span class ="topicos">	
					Consumo CPU: <input type="text" id="txtConsumoCPU"></input></br>
					Consumo Memória Ram: <input type="text" id="txtConsumoRAM"></input></br>
					Espaço reservado para a memória no SQL: <input type="text" id="txtMemoriaSQL"></input></br>
					Velocidade Internet: <input type="text" id="txtVelocidadeInternet"></input></br>
				</span>
				
				<p class="titulo">Ações Técnicas</p>
				
				<textarea id="txtareaAcoesTecnicas" rows= "10" cols= "100" class="textarea"></textarea>
				
				<p class="titulo">Conclusão</p>
				
				<textarea id="txtareaConclusao" rows= "10" cols= "100" class="textarea"></textarea>
				
				<p class="titulo">Orientação</p>
				
				<textarea id="txtareaOrientacao" rows= "10" cols= "100" class="textarea"></textarea>
<!--


				<input type="button" onclick="alert('Gerado com sucesso!')" value="Gerar TXT ">
            -->
			</div>
			
			<!-- Conteúdo da Aba Produto -->
			
			<div class="conteudo"> 

				<span class="topicos">Atendimento realizado por: <input type="text" id="txtAtendProd"></input></span>
				
				<p class="titulo">Dados da situação/problema</p>
				
				Módulo:  <input type="text" id="txtModulo"></input></br>
				Rotina:  <input type="text" id="txtRotina"></input></br>
				Empresas:  <input type="text" id="txtEmpresas"></input></br>
				Máquinas:  <input type="text" id="txtMaquinas"></input></br>
				Erro:  <input type="text" id="txtErro"></input></br>
				Backup:  <input type="text" id="txtBackup"></input></br>

				<p class="titulo">Ações Técnicas</p>
				
				<textarea id="txtareaAcoesTecnicas" rows= "10" cols= "100" class="textarea"></textarea>
				
				<p class="titulo">Conclusão</p>
				
				<textarea id="txtareaConclusao" rows= "10" cols= "100" class="textarea"></textarea>
				
				<p class="titulo">Orientação</p>
				
				<textarea id="txtareaOrientacao" rows= "10" cols= "100" class="textarea"></textarea>

			</div>
			
			<!-- Conteúdo da Aba Monitoramento -->
			
			<div class="conteudo"> 
				
				<span class="topicos">Atendimento realizado com: <input type="text" id="txtAtendProd"></input></span>
				
				<p class="titulo">Dados da situação/problema</p>
				
				Módulo:  <input type="text" id="txtModulo"></input></br>
				Rotina:  <input type="text" id="txtRotina"></input></br>
				Empresas:  <input type="text" id="txtEmpresas"></input></br>
				Máquinas:  <input type="text" id="txtMaquinas"></input></br>
				Erro:  <input type="text" id="txtErro"></input></br>
				Backup:  <input type="text" id="txtBackup"></input></br>		

				<p class="titulo">Ações Técnicas</p>
				
				<textarea id="txtareaAcoesTecnicas" rows= "10" cols= "100" class="textarea"></textarea>
				
				<p class="titulo">Conclusão</p>
				
				<textarea id="txtareaConclusao" rows= "10" cols= "100" class="textarea"></textarea>
				
				<p class="titulo">Orientação</p>
				
				<textarea id="txtareaOrientacao" rows= "10" cols= "100" class="textarea"></textarea>
				<!--

				<button onclick="myFunction()"> Gerar TXT </button>
				<p id="gerarTxt"></p>
				
				<script>
				function myFunction() {
					document.getElementById("gerarTxt").innerHTML = "TXT";
				}
				</script>
			</div>
			-->
			<!-- Conteúdo da Aba Serviços/TI --> 
			
			<div class="conteudo"> Conteúdo da aba 4 </div>
		</div>
	</div>
<!--


	<input placeholder="Título" id="title" type="text">

<textarea></textarea>

<input id="save" type="button" value='Salvar'>

<input id="download" type="button" value='Baixar'>

<script>
	let titleElement = document.querySelector('#title') //Pega o elemento de título
let title        = localStorage.getItem("title") //Recupera o título salvo no localStorage
let textElement  = document.querySelector('textarea') //Pega o elemento de texto
let text         = localStorage.getItem("text") //Recupera o conteudo salvo no localStorage
let btnSave      = document.querySelector('#save') // Pega o botão de salvar
let btnDownload  = document.querySelector("#download") //Pega o botão de download
let firestorage  = null // Armazena o firestorage

//Chama a função initFirestorage
initFirestorage()

//Chama a função bindValueToFields
bindValueToFields()

//Aguarda por um click no botão de salvar
btnSave.addEventListener('click', event => {

  title = titleElement.value.trim() //Pega o conteudo do título
  text = textElement.value.trim() //Pega o conteudo do texto

  localStorage.setItem("title",title)
  localStorage.setItem("text",text)

  //Verifica se título e conteudo estão preenchidos
  if(!text || !title){
    alert("Título e texto devem ser preenchidos")
    return
  }

  //Chama a função upload
  uploadFile(text, title+'.txt', "text/plain;charset=utf-8");

})

/*
 * Função responsável por criar um arquivo e fazer upload
 * no firestorage. Requer o conteudo, nome e mimeType do arquivo.
 * È preciso ter uma conta no firebase para isso, acesse esses links:
 * https://firebase.google.com/docs/storage/web/start?hl=pt-br
 * https://firebase.google.com/docs/web/setup?hl=pt-br
 */
function uploadFile(data, filename, type) {

  return

  //Cria um novo arquivo
  let file = new Blob([data], {type: type});

  /*
   * Após ter criado a conta no firebase é só
   * fazer o upload do arquivo como no exemplo da documentação
   * https://firebase.google.com/docs/storage/web/upload-files?hl=pt-br
   */
  let storageRef = firestorage.ref();
  let ref        = storageRef.child(filename);
  ref.put(file).then(function(snapshot) {
    //O arquivo foi salvo com sucesso
  }).catch(function(err){
    //Ocorreu um erro
  });

}

//Inicializa o Firestorage com as informações da sua conta
function initFirestorage(){

    // Set the configuration for your app
  // TODO: Replace with your project's config object
  var config = {
    apiKey: '<your-api-key>',
    authDomain: '<your-auth-domain>',
    databaseURL: '<your-database-url>',
    storageBucket: '<your-storage-bucket>'
  };
  firebase.initializeApp(config);

  // Get a reference to the storage service, which is used to create references in your storage bucket
  firestorage = firebase.storage();

}

//Recupera os valores anteriores que estão recuperados no localStorage
function bindValueToFields(){

  titleElement.value = title
  textElement.value = text

}

/*
 * Função responsável por fazer o download do arquivo
 * para baixar um arquivo basta digitar o nome do arquivo
 * sem a extensão, no campo título.
 * Exemplo de como baixar o arquivo na documentação:
 * https://firebase.google.com/docs/storage/web/download-files?hl=pt-br
 */
function downloadFile(){

  let storageRef = firestorage.ref();

  storageRef.child(title).getDownloadURL().then(function(url) {

      var xhr = new XMLHttpRequest();
      xhr.responseType = 'blob';
      xhr.onload = function(event) {
        download(xhr.response, title+".text", "text/plain;charset=utf-8")
      };
      xhr.open('GET', url);
      xhr.send();

  })

}

//Faz o download do arquivo
function download(data, filename, type) {
    var file = new Blob([data], {type: type});
    if (window.navigator.msSaveOrOpenBlob) // IE10+
        window.navigator.msSaveOrOpenBlob(file, filename);
    else { // Others
        var a = document.createElement("a"),
                url = URL.createObjectURL(file);
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        setTimeout(function() {
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);  
        }, 0); 
    }
}
</script>
	-->
</body>
</html>